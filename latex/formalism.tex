\title{CESK* / CFA Formalism}
\author{
	Davis Silverman
}
\date{}

\documentclass[12pt,draft]{article}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{tikz}
\usepackage{titling}
\usepackage{multicol}

\setlength{\columnsep}{0cm} % Column separation from multicol
% \setlength{\droptitle}{-10em}  % Make title not in middle of page (uses titling package)
\def\checkmark{\tikz\fill[scale=0.4](0,.35) -- (.25,0) -- (1,.7) -- (.25,.15) -- cycle;}

% \setcounter{section}{-1} % sets the first section number to 0
\newcommand\mdoubleplus{\ensuremath{\mathbin{+\mkern-9mu+}}}
\newcommand\mae{\ensuremath{\text{\ae}}}
\newcommand{\lamsyn}[2]{(\lambda\;(#1 ...)\;#2)}
\newcommand{\singlelamsyn}[2]{(\lambda\;(#1)\;#2)}
\newcommand{\vararglamsyn}[2]{(\lambda\;#1\;#2)}
\newcommand{\letsyn}[3]{(\texttt{let}\;([#1\;#2]\;...)\;#3)}
\newcommand{\ifsyn}[3]{(\texttt{if}\;#1\;#2\;#3)}
\newcommand{\primsyn}[2]{(\texttt{prim}\;#1\;#2\;...)}
\newcommand{\singleprimsyn}[1]{(\texttt{prim}\;#1)}
\newcommand{\applyprimsyn}[2]{(\texttt{apply-prim}\;#1\;#2)}
\newcommand{\applysyn}[2]{(\texttt{apply}\;#1\;#2)}
\newcommand{\callccsyn}[1]{(\texttt{call/cc}\;#1)}
\newcommand{\setsyn}[2]{(\texttt{set!}\;#1\;#2)}
\newcommand{\quotesyn}[1]{(\texttt{quote}\;#1)}

\newcommand{\truesyn}{\texttt{\#t}}
\newcommand{\falsesyn}{\texttt{\#f}}
\begin{document}
% \maketitle


% textsf for syntactic domains
% textit for semantic domains
% \maketitle
\section{Concrete Semantics of Scheme CESK*}

\begin{multicols*}{2}
\begin{center}
\textbf{Syntax Domains:}
\end{center}
\vspace{-18mm}
\begin{center}
\begin{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% EXPRESSIONS %%%%%%%%%%%%%%%%%%%%%%%%%
e \in \textsf{Exp} &::= \mae \\
				&|\; \ifsyn{e}{e}{e} \\
				&|\; \letsyn{x}{e}{e} \\
				&|\; \callccsyn{e} \\
				&|\; \setsyn{x}{e} \\
				&|\; \primsyn{op}{e} \\
				&|\; \applyprimsyn{op}{e} \\
				&|\; \applysyn{e}{e} \\
				&|\; (e\;e\;...) \\
%%%%%%%%%%%%%%%%%%%%%%%%% ATOMIC EXPRESSIONS %%%%%%%%%%%%%%%%%%%%%%%%%
\mae \in \textsf{AExp} &::= x\;|\; lam\;|\; \mathbb{Z}
							\;|\; \truesyn \;|\; \falsesyn \\
				&\;\;\;\;\;\;\;\;\;\, |\; \quotesyn{e} \\
%%%%%%%%%%%%%%%%%%%%%%%%% LAMBDA EXPRESSIONS %%%%%%%%%%%%%%%%%%%%%%%%%
lam \in \textsf{Lam} &::= \lamsyn{x}{e} \;|\; \vararglamsyn{x}{e} \\
%%%%%%%%%%%%%%%%%%%%%%%%% VARIABLE SET %%%%%%%%%%%%%%%%%%%%%%%%%
x \in \textsf{Var}   &\;\;\;\;\;\; \text{A set of identifiers} \\
%%%%%%%%%%%%%%%%%%%%%%%%% PRIMITIVE SET %%%%%%%%%%%%%%%%%%%%%%%%%
op \in \textsf{Prim} &\;\;\;\;\;\; \text{A set of primitives}
%%%%%%%%%%%%%%%%%%%%%%%%% END SYNTAX DOMAINS %%%%%%%%%%%%%%%%%%%%%%%%%
\end{align*}
\end{center}
%%%%%%%%%%%%%%%%%%%%% OTHER THINGS COLUMN 1! %%%%%%%%%%%%%%%%%%
\vspace{-10mm}
%%%%%%%%%%%%%%%%%%%%%%%%% ATOMIC EVALUATION %%%%%%%%%%%%%%%%%%%%%%%%%
\begin{center}
\textbf{Atomic Evaluation:}
$ \mathcal{A} : \Sigma_E \times \sigma \rightharpoonup \textit{Val} $ \\
$ \mathcal{A}( \langle lam , \rho , \_ , \_ \rangle, \_) 
			\triangleq (lam , \rho) $ \\
$ \mathcal{A}( \langle \quotesyn{e} , \_ , \_ , \_ \rangle, \_) 
			\triangleq \textbf{quote}(e) $ \\
$ \mathcal{A}( \langle x , \rho , \_ , \_ \rangle, \sigma) 
			\triangleq \sigma(\rho(x)) $ \\
$ \mathcal{A}( \langle \mae , \_ , \_ , \_ \rangle, \_) 
			\triangleq \mae $ \\
\end{center}
\vspace{-10mm}
%%%%%%%%%%%%%%%%%%%%%%%%% TICK/ALLOC FUNCTIONS %%%%%%%%%%%%%%%%
\begin{center}
\textbf{Tick/Alloc:} \\
$ tick : \Sigma \times \mathbb{N} \rightarrow \textit{Time} $ \\
$ tick(\langle \_, \_ , \_, t \rangle, n) \triangleq (t + n) $ \\
$ alloc : \Sigma \times \mathbb{N} \triangleq \textit{Addr} $ \\
$ alloc(\langle \_, \_ , \_, t \rangle, n) \triangleq (t + n) $ \\
\end{center}
\vspace{-10mm}
%%%%%%%%%%%%%%%%%%%%%%%%% INJECTION %%%%%%%%%%%%%%%%%%%%%%%%%
\begin{center}
\textbf{Injection:} \\
$\mathcal{I} : \textsf{Exp} \rightarrow \Sigma $ \\
$ \mathcal{I}(e) \triangleq (e , \varnothing , 0 , 1)$ \\
Initial $\sigma$ state $\triangleq \{ 0 : \textbf{mt} \} $ \\
\end{center}
\vspace{-10mm}
%%%%%%%%%%%%%%%%%%%%%%%%% TRANSITION %%%%%%%%%%%%%%%%%%%%%%%%%
\begin{center}
\textbf{Transition:}
\end{center}
\vspace{-10mm}
%%%%%%%%%%%%%%%%%%%%%%%%% COLLECTING SEMANTICS %%%%%%%%%%%%%%%%%%%%%%%%%
\begin{center}
\textbf{Collecting Semantics:}
\end{center}
\vspace{-10mm}


%%%%% COLUMN BREAK %%%%%%
\vfill\null
\columnbreak
%%%%% COLUMN BREAK %%%%%%


\begin{center}
\textbf{Semantic Domains:}
\end{center}
\vspace{-18mm}
\begin{center}
\begin{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% STATES %%%%%%%%%%%%%%%%%%%%%%%%%
\varsigma \in \Sigma &\triangleq E\langle\textit{Eval}\rangle 
								+ A\langle\textit{Apply}\rangle \\
\textit{Eval} &\triangleq \:\;\textsf{Exp} \times \textit{Env} \\
						& \times \textit{Addr} \times \textit{Time} \\
\textit{Apply} &\triangleq \:\;\,\textit{Val} \times \textit{Env} \\
						& \times \textit{Addr} \times \textit{Time} \\
%%%%%%%%%%%%%%%%%%%%%%%%% ENVIRONMENT %%%%%%%%%%%%%%%%%%%%%%%%%
\rho \in \textit{Env} &\triangleq \textsf{Var} \rightharpoonup 
												\textit{Addr} \\
%%%%%%%%%%%%%%%%%%%%%%%%% STORE %%%%%%%%%%%%%%%%%%%%%%%%%
\sigma \in \textit{Store} &\triangleq \textit{Addr} \rightharpoonup
													\textit{Val} \\
%%%%%%%%%%%%%%%%%%%%%%%%% VALUES %%%%%%%%%%%%%%%%%%%%%%%%%
v \in \textit{Val} &\triangleq \textit{Clo} + \textit{Kont} + \mathbb{Z} \\
				&+ \{ \truesyn,\falsesyn, \textit{Null} , \textit{Void} \} \\
				&+ \{\textbf{quote}(e) \;,\; \textbf{cons}(v, v)\} \\
%%%%%%%%%%%%%%%%%%%%%%%%% CLOSURES %%%%%%%%%%%%%%%%%%%%%%%%%
clo \in \textit{Clo} &\triangleq \textsf{Lam} \times \textit{Env} \\
%%%%%%%%%%%%%%%%%%%%%%%%% ADDRESSES %%%%%%%%%%%%%%%%%%%%%%%%%
a,b,c \in \textit{Addr} &\triangleq \mathbb{N} \\
%%%%%%%%%%%%%%%%%%%%%%%%% TIME %%%%%%%%%%%%%%%%%%%%%%%%%
t,u \in \textit{Time} &\triangleq \mathbb{N} \\
%%%%%%%%%%%%%%%%%%%%%%%%% KONTINUATIONS %%%%%%%%%%%%%%%%%%%%%%%%%
\kappa \in \textit{Kont} &::= \textbf{mt} \\
        &|\; \textbf{ifk}(e, e, \rho, a) \\
        &|\; \textbf{callcck}(\rho, a) \\
        &|\; \textbf{setk}(x, \rho, a) \\
        &|\; \textbf{appappk}(val?, e, \rho, a) \\
        &|\; \textbf{appk}(done, todo, \rho, a) \\
        &|\; \textbf{appprimk}(op, \rho, a) \\
        &|\; \textbf{primk}(op, done, todo, \\
        &\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\rho, a) \\
        &|\; \textbf{letk}(vars, done, todo \\
        &\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;e, \rho, a) \\
%%%%%%%%%%%%%%%%%%%%%%%%% OTHER VARIABLES %%%%%%%%%%%%%%%%%%%%%%%%%
%%% done/todo variables
done &\triangleq \textit{Val}^* \\
todo &\triangleq \textsf{Exp}^* \\
vars &\triangleq \textsf{Var}^*
\end{align*}
\end{center}
\end{multicols*}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% BEGIN EVAL SEMANTICS %%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage

\begin{multicols*}{2}
[
\begin{center}
\textbf{Eval Rules} \\
Rules for when the control is an expression \\
%%%%%%%%%%%%%%%%%%%%%%%%% ATOMIC EVALUATION %%%%%%%%%%%%%%%%
\vspace{5mm}
$E\langle \mae , \rho , a , t \rangle 
\leadsto 
A\langle v , \rho , a , t \rangle$ \\ 
where $v \triangleq \mathcal{A}(\varsigma, \sigma)$ \\
\vspace{-10mm}
\end{center}
]
%%%%%%%%%%%%%%%%%%%%%%%%% IF EXPRESSION %%%%%%%%%%%%%%%%%%%%%%%%%
\[
E\langle
\ifsyn{e_c}{e_t}{e_f} , \rho , a , t
\rangle
\leadsto
E\langle
e_c , \rho , b , u
\rangle
\]
\vspace{-13mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{ifk}(e_t, e_f, \rho, a)]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% LET EXPRESSION NO ARGSVALS %%%%%%%%%%%%%%%%%%%
\vspace{-5mm}
\[
E\langle
(\texttt{let}\;()\;e) , \rho , a , t
\rangle
\leadsto
E\langle
e , \rho , a , u
\rangle
\]
\vspace{-12mm}
\begin{align*}
\text{where } u &\triangleq tick(\varsigma, 1)
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% LET EXPRESSION VALS GOT ARGS %%%%%%%%%%%%%%%
\vspace{-5mm}
\[
E\langle
(\texttt{let}\;([x_0\;e_0]\;[x_s\;e_s]\;...)\;e_b) , \rho , a , t
\rangle
\]
\vspace{-7mm}
\[
\leadsto
E\langle
e_{0} , \rho , b , u
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{letk}(x_0::x_s, \\
&\;\;\;\;\;\;\;\; [\;], e_s, e_b, \rho, a)]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% CALL/CC EXPRESSION %%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{-5mm}
\[
E\langle
\callccsyn{e} , \rho , a , t
\rangle
\leadsto
E\langle
e , \rho , b , u
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{callcck}(\rho, a)]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% SET EXPRESSION %%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{-5mm}
\[
E\langle
\setsyn{x}{e} , \rho , a , t
\rangle
\leadsto
E\langle
e , \rho , b , u
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{setk}(x, a)]
\end{align*}


%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% COLUMN BREAK %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
\vfill\null
\columnbreak
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% COLUMN BREAK %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%% PRIM NO ARG EXPRESSION %%%%%%%%%%%%%%%%%%%%
\vspace{-5mm}
\[
E\langle
\singleprimsyn{op} , \rho , a , t
\rangle
\leadsto
A\langle
v , \rho , a , t
\rangle
\]
\vspace{-13mm}
\begin{align*}
\text{where } v &= op \text{ applied to } 0 \text{ arguments}
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% PRIM WITH ARGS EXPRESSION %%%%%%%%%%%%%%%%
\vspace{-5mm}
\[
E\langle
\primsyn{op}{e_0\;e_s} , \rho , a , t
\rangle
\]
\vspace{-7mm}
\[
\leadsto
E\langle
e_0 , \rho , b , u
\rangle
\]
\vspace{-10mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{primk}(op, [\;], e_s, \rho, a)]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLY PRIM EXPRESSION %%%%%%%%%%%%%%%%
\vspace{-5mm}
\[
E\langle
\applyprimsyn{op}{e} , \rho , a , t
\rangle
\]
\vspace{-7mm}
\[
\leadsto
E\langle
e , \rho , b , u
\rangle
\]
\vspace{-12mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{appprimk}(op, a)] \\
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLY FUNCTION LIST EXPRESSION %%%%%%%%%%%%%%%%
\vspace{-12mm}
\[
E\langle
\applysyn{e_f}{e_x} , \rho , a , t
\rangle
\]
\vspace{-8mm}
\[
\leadsto
E\langle
e_f , \rho , b , u
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{appappk}(\varnothing , e_x , \rho, a)]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLICATION EXPRESSION %%%%%%%%%%%%%%%%
\vspace{-5mm}
\[
E\langle
(e_f\;e_s\;...) , \rho , a , t
\rangle
\leadsto
E\langle
e_f , \rho , b , u
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{appk}([\;],  e_s , \rho, a)] \\
\end{align*}
\end{multicols*}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%% BEGIN APPLY SEMANTICS %%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% PAGE 1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage


\begin{multicols*}{2}
[
\begin{center}
\textbf{Apply Rules} \\
Rules for when the control is a value \\
$\varsigma = A\langle v , \rho , a , t \rangle$ \\
$\kappa \triangleq \sigma(a)$ \\
Proceed by matching on $\kappa$
%%%%%%%%%%%%%%%%%%%%%%%%% EMPTY KONT %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{mt} \leadsto \varsigma
\]
\end{center}
\vspace{-15mm}
]
%%%%%%%%%%%%%%%%%%%%%%%%% IF KONT FALSE %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{ifk}(e_t, e_f, \rho, c)
\leadsto
E\langle
e_f , \rho , c , t
\rangle
\]
\vspace{-13mm}
\begin{align*}
\text{where } v &= \falsesyn
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% IF KONT TRUE %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{ifk}(e_t, e_f, \rho, c)
\leadsto
E\langle
e_t , \rho , c , t
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } v &\not= \falsesyn
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% LET KONT DONE %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{letk}(vars, done, [\;], e_b , \rho_{\kappa}, c)
\]
\vspace{-7mm}
\[
\leadsto
E\langle
e_b , \rho'_{\kappa} , c , u
\rangle
\]
\vspace{-10mm}
\begin{align*}
\text{where } b_i &\triangleq alloc(\varsigma, i) \\
u &\triangleq tick(\varsigma, n) \\
done' &\triangleq done \mdoubleplus [v] \\
\rho'_{\kappa} &\triangleq \rho_{\kappa}[vars_0 \mapsto b_0\;...\\
&\;\;\;\;\;\;\;\;\;  vars_{n-1} \mapsto b_{n-1}] \\
\sigma[b_0 &\mapsto done'_0\;...\;b_{n-1} \mapsto done'_{n-1}]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% LET KONT MORE TODO %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{letk}(vars, done, e_h::e_t, e_b , \rho_{\kappa}, c)
\]
\vspace{-7mm}
\[
\leadsto
E\langle
e_h , \rho_{\kappa} , b , u
\rangle
\]
\vspace{-10mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{letk}(vars, done \mdoubleplus [v], \\
&\;\;\;\;\;\;\;\;\;\;\;\;\;\; e_t , e_b , \rho_{\kappa} , c)]
\end{align*}

%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% COLUMN BREAK %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
\vfill\null
\columnbreak
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% COLUMN BREAK %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%% CALL/CC MULTIARG KONT %%%%%%%%%%%%%%%%%%%%%
\[
\textbf{callcck}(\_, c)
\leadsto
E\langle
e , \rho'_{\lambda} , c , t
\rangle
\]
\vspace{-13mm}
\begin{align*}
\text{where } v &= (\singlelamsyn{x}{e} , \rho_{\lambda}) \\
\rho'_{\lambda} &\triangleq \rho_{\lambda}[x \mapsto c]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% CALL/CC KONT ARG %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{callcck}(\rho' , \_)
\leadsto
A\langle
\kappa , \rho' , b , u
\rangle
\]
\vspace{-10mm}
\begin{align*}
\text{where } v &= \kappa' \\
b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \kappa']
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% SET! KONT %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{setk}(x, \rho_{\kappa}, c)
\leadsto
A\langle
\textit{Void} , \rho_{\kappa} , c , t
\rangle
\]
\vspace{-10mm}
\begin{align*}
\text{where } \sigma&[\rho_{\kappa}(x) \mapsto v]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLY PRIM KONT %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{appprimk}(op, \rho_{\kappa}, c)
\leadsto
A\langle
v' , \rho_{\kappa} , c , t
\rangle
\]
\vspace{-12mm}
\begin{align*}
\text{where } v' &\triangleq op \text{ applied to } v
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% PRIM KONT DONE %%%%%%%%%%%%%%%%%%
\[
\textbf{primk}(op, done, [\;], \rho_{\kappa}, c)
\]
\vspace{-7mm}
\[
\leadsto
A\langle
v' , \rho_{\kappa} , c , t
\rangle
\]
\vspace{-12mm}
\begin{align*}
\text{where } v' &\triangleq op \text{ applied to } (done \mdoubleplus [v])
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% PRIM KONT NOT DONE %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{primk}(op, done, e_h::e_t,\rho_{\kappa}, c)
\]
\vspace{-7mm}
\[
\leadsto
E\langle
e_h , \rho_{\kappa} , b , u
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{primk}(op, done \mdoubleplus [v], \\
&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\; e_t, \rho_{\kappa}, c)]
\end{align*}
\end{multicols*}
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% MORE APPLY SEMANTICS %%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% PAGE 2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{multicols*}{2}
[
\begin{center}
\textbf{More Apply Rules} \\
Rules for when the control is a value
\end{center}
]
%%%%%%%%%%%%%%%%%%%%%%%%% APPLY LIST KONT NOT DONE %%%%%%%%%%%%%%%%%%
\[
\textbf{appappk}(\varnothing, e, \rho_{\kappa}, c)
\leadsto
E\langle
e , \rho_{\kappa} , b , u
\rangle
\]
\vspace{-13mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{appappk}(v, e, \rho_{\kappa}, c)]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLY LIST DONE MULTIARG %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{appappk}(v_f,\_, \rho_{\kappa}, c)
\leadsto
E\langle
e_b , \rho'_{\lambda} , c , u
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } v_f &= (\lamsyn{x_s}{e_b}, \rho_{\lambda}) \\
b_i &\triangleq alloc(\varsigma, i) \\
u &\triangleq tick(\varsigma, n) \\
\rho'_{\lambda} &\triangleq \rho_{\lambda}[x_0 \mapsto b_0\; ... \\
&\;\;\;\;\;\;\;\;\;x_{n-1} \mapsto b_{n-1}] \\
\sigma[b_0 &\mapsto v_0\;...\; b_{n-1} \mapsto v_{n-1}]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLY LIST DONE VARARG %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{appappk}(v_f,\_, \rho_{\kappa}, c)
\leadsto
E\langle
e_b , \rho'_{\lambda} , c , u
\rangle
\]
\vspace{-10.5mm}
\begin{align*}
\text{where } v_f &= (\vararglamsyn{x}{e_b}, \rho_{\lambda}) \\
b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\rho'_{\lambda} &\triangleq \rho_{\lambda}[x \mapsto b] \\
\sigma[b &\mapsto v]
\end{align*}

%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% COLUMN BREAK %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
\vfill\null
\columnbreak
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% COLUMN BREAK %%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%% APPLICATION MULTIARG %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{appk}(done, [\;], \rho_{\kappa}, c)
\leadsto
E\langle
e_b , \rho'_{\lambda} , c , u
\rangle
\]
\vspace{-11mm}
\begin{align*}
\text{where } done &= (\lamsyn{x_s}{e_b}, \rho_{\lambda}) :: v_s \\
b_i &\triangleq alloc(\varsigma, i) \\
u &\triangleq tick(\varsigma, n) \\
\rho'_{\lambda} &\triangleq \rho_{\lambda}[x_0 \mapsto b_0 \;... \\
&\;\;\;\;\;\;\;\;\;x_{n-1} \mapsto b_{n-1}] \\
v'_s &\triangleq v_s \mdoubleplus [v] \\
\sigma[b_0 &\mapsto v'_0 \;...\; b_{n-1} \mapsto v'_{n-1}]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLICATION VARARG %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{appk}(done, [\;], \rho_{\kappa}, c)
\leadsto
E\langle
e_b , \rho'_{\lambda} , c , u
\rangle
\]
\vspace{-9mm}
\begin{align*}
\text{where } done &= (\vararglamsyn{x}{e_b}, \rho_{\lambda}) :: v_s \\
b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\rho'_{\lambda} &\triangleq \rho_{\lambda}[x \mapsto b] \\
v'_s &\triangleq (v_s \mdoubleplus [v]) \\
\sigma[b &\mapsto v'_s]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLICATION KONTINUATION %%%%%%%%%%%%%%%%%%%%%
\[
\textbf{appk}([\kappa_{\lambda}], [\;], \rho_{\kappa}, c)
\leadsto
A\langle
v , \rho_{\kappa} , b , u
\rangle
\]
\vspace{-10mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \kappa_{\lambda}]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% APPLICATION NOT DONE %%%%%%%%%%%%%%%%%%%%%%%%%
\[
\textbf{appk}(done, e_h::e_t, \rho_{\kappa}, c)
\]
\vspace{-7mm}
\[
\leadsto
E\langle
e_h , \rho_{\kappa} , b , u
\rangle
\]
\vspace{-10mm}
\begin{align*}
\text{where } b &\triangleq alloc(\varsigma, 0) \\
u &\triangleq tick(\varsigma, 1) \\
\sigma[b &\mapsto \textbf{appk}(done \mdoubleplus [v], \\
&\;\;\;\;\;\;\;\;\;\;\;\;\;\;\;\; e_t , \rho_{\kappa} , c)]
\end{align*}
%%%%%%%%%%%%%%%%%%%%%%%%% ITS OVER %%%%%%%%%%%%%%%%%%%%%%%%%
\end{multicols*}



\newpage
\section{Abstract Semantics of Scheme CESK*}




























\end{document}
  